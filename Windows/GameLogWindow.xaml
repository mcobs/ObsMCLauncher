<Window x:Class="ObsMCLauncher.Windows.GameLogWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="游戏日志" 
        Height="600" 
        Width="900"
        MinHeight="400"
        MinWidth="600"
        Background="{DynamicResource BackgroundBrush}"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="False"
        ResizeMode="CanResize"
        TextElement.Foreground="{DynamicResource TextBrush}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        FontFamily="{materialDesign:MaterialDesignFont}">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="40" 
                      ResizeBorderThickness="5" 
                      GlassFrameThickness="0"
                      CornerRadius="0"/>
    </WindowChrome.WindowChrome>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题栏 -->
        <Border Grid.Row="0" 
                Background="{DynamicResource SurfaceBrush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- 标题 -->
                <StackPanel Grid.Column="0" 
                          Orientation="Horizontal" 
                          Margin="15,0,0,0"
                          VerticalAlignment="Center">
                    <materialDesign:PackIcon Kind="Console" 
                                           Width="20" 
                                           Height="20" 
                                           VerticalAlignment="Center"
                                           Foreground="{StaticResource PrimaryBrush}"/>
                    <TextBlock x:Name="TitleText"
                             Text="游戏日志" 
                             FontSize="13" 
                             FontWeight="SemiBold"
                             Margin="10,0,0,0"
                             VerticalAlignment="Center"/>
                </StackPanel>

                <!-- 窗口控制按钮 -->
                <StackPanel Grid.Column="1" 
                          Orientation="Horizontal" 
                          HorizontalAlignment="Right"
                          WindowChrome.IsHitTestVisibleInChrome="True">
                    
                    <!-- 最小化按钮 -->
                    <Button x:Name="MinimizeButton"
                          Click="MinimizeButton_Click"
                          Width="46"
                          Height="40"
                          Style="{StaticResource MaterialDesignFlatButton}"
                          Foreground="{DynamicResource TextBrush}"
                          ToolTip="最小化">
                        <materialDesign:PackIcon Kind="WindowMinimize" 
                                               Width="16" 
                                               Height="16"/>
                    </Button>

                    <!-- 关闭按钮 -->
                    <Button x:Name="CloseButton"
                          Click="CloseButton_Click"
                          Width="46"
                          Height="40"
                          Style="{StaticResource MaterialDesignFlatButton}"
                          Foreground="{DynamicResource TextBrush}"
                          ToolTip="关闭">
                        <Button.Resources>
                            <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#DC3545"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Resources>
                        <materialDesign:PackIcon Kind="WindowClose" 
                                               Width="16" 
                                               Height="16"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- 日志内容区域 -->
        <Border Grid.Row="1" 
                Background="{DynamicResource BackgroundBrush}"
                Padding="0">
            <RichTextBox x:Name="LogTextBox"
                       IsReadOnly="True"
                       Background="Transparent"
                       BorderThickness="0"
                       Padding="15"
                       FontFamily="Consolas, Courier New"
                       FontSize="12"
                       Foreground="{DynamicResource TextBrush}"
                       VerticalScrollBarVisibility="Auto"
                       HorizontalScrollBarVisibility="Auto">
                <RichTextBox.Resources>
                    <Style TargetType="Paragraph">
                        <Setter Property="Margin" Value="0"/>
                    </Style>
                </RichTextBox.Resources>
                <FlowDocument>
                    <!-- 日志内容将动态添加到这里 -->
                </FlowDocument>
            </RichTextBox>
        </Border>

        <!-- 底部工具栏 -->
        <Border Grid.Row="2"
                Background="{DynamicResource SurfaceBrush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="0,1,0,0"
                Padding="15,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- 状态信息 -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <materialDesign:PackIcon x:Name="StatusIcon"
                                           Kind="Circle"
                                           Width="12"
                                           Height="12"
                                           VerticalAlignment="Center"
                                           Foreground="#22C55E"/>
                    <TextBlock x:Name="StatusText"
                             Text="游戏运行中"
                             FontSize="12"
                             Margin="8,0,0,0"
                             VerticalAlignment="Center"
                             Foreground="{DynamicResource TextSecondaryBrush}"/>
                    <TextBlock x:Name="LineCountText"
                             Text="0 行"
                             FontSize="12"
                             Margin="15,0,0,0"
                             VerticalAlignment="Center"
                             Foreground="{DynamicResource TextSecondaryBrush}"/>
                </StackPanel>

                <!-- 操作按钮 -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <CheckBox x:Name="AutoScrollCheckBox"
                            Content="自动滚动"
                            IsChecked="True"
                            FontSize="12"
                            Margin="0,0,15,0"
                            VerticalAlignment="Center"
                            Style="{StaticResource MaterialDesignCheckBox}"/>
                    
                    <Button x:Name="ClearButton"
                          Click="ClearButton_Click"
                          Style="{StaticResource MaterialDesignOutlinedButton}"
                          Height="32"
                          Padding="12,0"
                          Margin="0,0,8,0"
                          ToolTip="清空日志">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="DeleteSweep" 
                                                   Width="16" 
                                                   Height="16"
                                                   VerticalAlignment="Center"/>
                            <TextBlock Text="清空" 
                                     Margin="6,0,0,0"
                                     VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="SaveButton"
                          Click="SaveButton_Click"
                          Style="{StaticResource MaterialDesignOutlinedButton}"
                          Height="32"
                          Padding="12,0"
                          ToolTip="保存日志">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ContentSave" 
                                                   Width="16" 
                                                   Height="16"
                                                   VerticalAlignment="Center"/>
                            <TextBlock Text="保存" 
                                     Margin="6,0,0,0"
                                     VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
