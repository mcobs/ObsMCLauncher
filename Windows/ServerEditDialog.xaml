<Window x:Class="ObsMCLauncher.Windows.ServerEditDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="{Binding DialogTitle}"
        Height="450"
        Width="500"
        MinHeight="400"
        MinWidth="450"
        Background="{DynamicResource BackgroundBrush}"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        TextElement.Foreground="{DynamicResource TextBrush}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        FontFamily="{materialDesign:MaterialDesignFont}">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="40" 
                      ResizeBorderThickness="5" 
                      GlassFrameThickness="0"
                      CornerRadius="0"/>
    </WindowChrome.WindowChrome>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题栏 -->
        <Grid Grid.Row="0" Background="{DynamicResource SurfaceBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBlock Grid.Column="0"
                     Text="{Binding DialogTitle}"
                     FontSize="16"
                     FontWeight="SemiBold"
                     VerticalAlignment="Center"
                     Margin="16,0"/>
            
            <Button Grid.Column="1"
                  x:Name="CloseButton"
                  Click="CloseButton_Click"
                  Style="{StaticResource MaterialDesignFlatButton}"
                  Padding="8"
                  Width="40"
                  Height="40">
                <materialDesign:PackIcon Kind="Close" Width="20" Height="20"/>
            </Button>
        </Grid>

        <!-- 内容区域 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="24">
            <StackPanel>
                <!-- 服务器名称 -->
                <TextBox x:Name="NameTextBox"
                       materialDesign:HintAssist.Hint="服务器名称 *"
                       Style="{StaticResource MaterialDesignOutlinedTextBox}"
                       Margin="0,0,0,16"/>

                <!-- 服务器地址 -->
                <TextBox x:Name="AddressTextBox"
                       materialDesign:HintAssist.Hint="服务器地址 (IP或域名) *"
                       Style="{StaticResource MaterialDesignOutlinedTextBox}"
                       Margin="0,0,0,16"/>

                <!-- 服务器端口 -->
                <TextBox x:Name="PortTextBox"
                       materialDesign:HintAssist.Hint="端口 (默认: 25565)"
                       Style="{StaticResource MaterialDesignOutlinedTextBox}"
                       Margin="0,0,0,16"
                       Text="25565"/>

                <!-- 服务器描述 -->
                <TextBox x:Name="DescriptionTextBox"
                       materialDesign:HintAssist.Hint="描述 (可选)"
                       Style="{StaticResource MaterialDesignOutlinedTextBox}"
                       AcceptsReturn="True"
                       TextWrapping="Wrap"
                       MinHeight="80"
                       Margin="0,0,0,16"
                       VerticalScrollBarVisibility="Auto"/>

                <!-- 服务器分组 -->
                <TextBox x:Name="GroupTextBox"
                       materialDesign:HintAssist.Hint="分组 (可选)"
                       Style="{StaticResource MaterialDesignOutlinedTextBox}"
                       Margin="0,0,0,16"/>

                <!-- 图标路径 -->
                <Grid Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBox x:Name="IconPathTextBox"
                           Grid.Column="0"
                           materialDesign:HintAssist.Hint="图标路径 (可选)"
                           Style="{StaticResource MaterialDesignOutlinedTextBox}"
                           Margin="0,0,8,0"/>
                    
                    <Button Grid.Column="1"
                          x:Name="BrowseIconButton"
                          Click="BrowseIconButton_Click"
                          Style="{StaticResource MaterialDesignOutlinedButton}"
                          Padding="12,8">
                        <TextBlock Text="浏览..."/>
                    </Button>
                </Grid>
            </StackPanel>
        </ScrollViewer>

        <!-- 按钮区域 -->
        <Border Grid.Row="2"
              Background="{DynamicResource SurfaceBrush}"
              BorderBrush="{DynamicResource BorderBrush}"
              BorderThickness="0,1,0,0"
              Padding="24,16">
            <StackPanel Orientation="Horizontal"
                      HorizontalAlignment="Right">
                <Button Content="取消"
                      Style="{StaticResource MaterialDesignOutlinedButton}"
                      Padding="16,8"
                      Margin="0,0,12,0"
                      Click="CancelButton_Click"/>
                <Button Content="确定"
                      Style="{StaticResource MaterialDesignRaisedButton}"
                      Background="{StaticResource PrimaryBrush}"
                      Padding="16,8"
                      Click="OKButton_Click"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>

