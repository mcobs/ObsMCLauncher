# ObsMCLauncher æ’ä»¶å¼€å‘æŒ‡å—

æ¬¢è¿æ¥åˆ° ObsMCLauncher æ’ä»¶å¼€å‘ï¼æœ¬æ–‡æ¡£å°†æŒ‡å¯¼æ‚¨å¦‚ä½•å¼€å‘ã€æµ‹è¯•å’Œå‘å¸ƒæ’ä»¶ã€‚

---

## ğŸ“– ç›®å½•

- [æ’ä»¶ç³»ç»Ÿä»‹ç»](#æ’ä»¶ç³»ç»Ÿä»‹ç»)
- [å¼€å‘ç¯å¢ƒè¦æ±‚](#å¼€å‘ç¯å¢ƒè¦æ±‚)
- [æ’ä»¶ç›®å½•ä½ç½®](#æ’ä»¶ç›®å½•ä½ç½®)
- [æ’ä»¶ç»“æ„](#æ’ä»¶ç»“æ„)
- [æ’ä»¶æ¥å£](#æ’ä»¶æ¥å£)
- [API å‚è€ƒ](#api-å‚è€ƒ)
- [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
- [æµ‹è¯•æ’ä»¶](#æµ‹è¯•æ’ä»¶)
- [ç”¨æˆ·å®‰è£…æ’ä»¶](#ç”¨æˆ·å®‰è£…æ’ä»¶)
- [å‘å¸ƒæµç¨‹](#å‘å¸ƒæµç¨‹)
- [ç¤ºä¾‹æ’ä»¶](#ç¤ºä¾‹æ’ä»¶)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ”Œ æ’ä»¶ç³»ç»Ÿä»‹ç»

ObsMCLauncher é‡‡ç”¨åŸºäº .NET Assembly çš„æ’ä»¶ç³»ç»Ÿï¼Œæ”¯æŒå¼€å‘è€…ä½¿ç”¨ C# ç¼–å†™æ’ä»¶æ¥æ‰©å±•å¯åŠ¨å™¨åŠŸèƒ½ã€‚

### æ’ä»¶ç‰¹æ€§

- âœ… åŸç”Ÿæ€§èƒ½ï¼Œæ— æ²™ç®±é™åˆ¶
- âœ… å®Œæ•´è®¿é—®å¯åŠ¨å™¨ API
- âœ… æ”¯æŒ UI æ‰©å±•ï¼ˆåŸºäº Avaloniaï¼‰
- âœ… äº‹ä»¶é©±åŠ¨æ¶æ„
- âœ… é…ç½®æ–‡ä»¶æ”¯æŒ
- âœ… è·¨å¹³å°æ”¯æŒï¼ˆWindows/macOS/Linuxï¼‰

### æ’ä»¶ç±»å‹

- **åŠŸèƒ½å¢å¼ºæ’ä»¶**ï¼šæ·»åŠ æ–°åŠŸèƒ½ï¼ˆå¦‚çš®è‚¤ç®¡ç†ã€æœåŠ¡å™¨ç›‘æ§ï¼‰
- **UI æ’ä»¶**ï¼šæ‰©å±•ç”¨æˆ·ç•Œé¢
- **å·¥å…·æ’ä»¶**ï¼šæä¾›å®ç”¨å·¥å…·ï¼ˆå¦‚å¤‡ä»½ã€æ€§èƒ½ç›‘æ§ï¼‰
- **é›†æˆæ’ä»¶**ï¼šä¸ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ

---

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒè¦æ±‚

### å¿…éœ€å·¥å…·

- **.NET 8.0 SDK** æˆ–æ›´é«˜ç‰ˆæœ¬
- **Visual Studio 2022** æˆ– **Rider** æˆ– **VS Code**
- **Git**ï¼ˆç”¨äºç‰ˆæœ¬æ§åˆ¶ï¼‰

### æ¨èå®‰è£…

- **Avalonia VS Code Extension**ï¼ˆç”¨äºXAMLé¢„è§ˆï¼‰
- **ILSpy** æˆ– **dnSpy**ï¼ˆç”¨äºåç¼–è¯‘å’Œè°ƒè¯•ï¼‰

---

## ğŸ“ æ’ä»¶ç›®å½•ä½ç½®

### æ’ä»¶å®‰è£…ç›®å½•

ObsMCLauncher çš„æ’ä»¶ç›®å½•æ˜¯**å›ºå®šçš„**ï¼Œä½äºå¯åŠ¨å™¨è¿è¡Œç›®å½•ä¸‹çš„ `OMCL\plugins\` æ–‡ä»¶å¤¹ï¼š

```
è¿è¡Œç›®å½•\OMCL\plugins\
```

**è¯´æ˜**ï¼š
- æ’ä»¶ç›®å½•ä½ç½®æ˜¯å›ºå®šçš„ï¼Œä¸æ”¯æŒè‡ªå®šä¹‰
- æ‰€æœ‰æ’ä»¶éƒ½å®‰è£…åœ¨åŒä¸€ä¸ª `OMCL\plugins\` ç›®å½•ä¸‹
- æ¯ä¸ªæ’ä»¶æœ‰è‡ªå·±ç‹¬ç«‹çš„å­æ–‡ä»¶å¤¹ï¼ˆæ–‡ä»¶å¤¹åå¿…é¡»ä¸æ’ä»¶IDä¸€è‡´ï¼‰
- è¿™ç§è®¾è®¡ä¾¿äºä¾¿æºä½¿ç”¨å’Œå¤‡ä»½

### ç›®å½•ç»“æ„

```
ObsMCLauncher/                           # å¯åŠ¨å™¨è¿è¡Œç›®å½•
â”œâ”€â”€ ObsMCLauncher.Desktop.dll
â”œâ”€â”€ OMCL/                                # å¯åŠ¨å™¨æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ config/                          # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ config.json
â”‚   â”‚   â””â”€â”€ accounts.json
â”‚   â””â”€â”€ plugins/                         # æ’ä»¶ç›®å½•ï¼ˆé»˜è®¤ä½ç½®ï¼‰
â”‚       â”œâ”€â”€ example-hello-plugin/        # æ’ä»¶æ–‡ä»¶å¤¹
â”‚       â”‚   â”œâ”€â”€ example-hello-plugin.dll # æ’ä»¶ç¨‹åºé›†
â”‚       â”‚   â”œâ”€â”€ plugin.json              # æ’ä»¶å…ƒæ•°æ®
â”‚       â”‚   â”œâ”€â”€ icon.png                 # æ’ä»¶å›¾æ ‡ï¼ˆå¯é€‰ï¼‰
â”‚       â”‚   â”œâ”€â”€ config.json              # æ’ä»¶é…ç½®ï¼ˆå¯é€‰ï¼Œç”±å¼€å‘è€…è‡ªå®šä¹‰ï¼‰
â”‚       â”‚   â””â”€â”€ data/                    # æ’ä»¶æ•°æ®ï¼ˆå¯é€‰ï¼Œç”±å¼€å‘è€…è‡ªå®šä¹‰ï¼‰
â”‚       â””â”€â”€ another-plugin/              # å¦ä¸€ä¸ªæ’ä»¶
â”‚           â”œâ”€â”€ another-plugin.dll
â”‚           â”œâ”€â”€ plugin.json
â”‚           â”œâ”€â”€ icon.png
â”‚           â””â”€â”€ settings.json            # æ’ä»¶è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶
â””â”€â”€ (å…¶ä»–å¯åŠ¨å™¨æ–‡ä»¶)
```

### æ’ä»¶å‘½åè§„èŒƒ

- **æ’ä»¶æ–‡ä»¶å¤¹å**ï¼šå¿…é¡»ä¸æ’ä»¶ ID å®Œå…¨ä¸€è‡´
- **DLL æ–‡ä»¶å**ï¼šå»ºè®®ä¸æ’ä»¶ ID ä¸€è‡´ï¼ˆå¦‚ `my-plugin.dll`ï¼‰
- **æ’ä»¶ ID è§„åˆ™**ï¼š
  - åªèƒ½åŒ…å«å°å†™å­—æ¯ã€æ•°å­—å’Œè¿å­—ç¬¦ `-`
  - å¿…é¡»ä»¥å­—æ¯å¼€å¤´
  - é•¿åº¦ 3-50 ä¸ªå­—ç¬¦
  - ç¤ºä¾‹ï¼š`hello-plugin`, `skin-manager`, `backup-tool`

---

## ğŸ“¦ æ’ä»¶ç»“æ„

### ç›®å½•ç»“æ„

```
YourPlugin/
â”œâ”€â”€ YourPlugin.csproj          # é¡¹ç›®æ–‡ä»¶
â”œâ”€â”€ Plugin.cs                  # æ’ä»¶ä¸»ç±»ï¼ˆå®ç° ILauncherPluginï¼‰
â”œâ”€â”€ plugin.json                # æ’ä»¶å…ƒæ•°æ®
â”œâ”€â”€ icon.png                   # æ’ä»¶å›¾æ ‡ï¼ˆå¯é€‰ï¼Œ128x128ï¼‰
â”œâ”€â”€ README.md                  # æ’ä»¶è¯´æ˜ï¼ˆå¿…éœ€ï¼‰
â””â”€â”€ LICENSE                    # å¼€æºåè®®
```

### plugin.json æ ¼å¼

```json
{
  "id": "your-plugin-id",
  "name": "æ‚¨çš„æ’ä»¶åç§°",
  "version": "1.0.0",
  "author": "æ‚¨çš„åå­—",
  "description": "æ’ä»¶ç®€è¦æè¿°",
  "repository": "https://github.com/yourusername/your-plugin",
  "minLauncherVersion": "1.0.0",
  "dependencies": [],
  "tags": ["Windows", "å·¥å…·"],
  "category": "utility"
}
```

### å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| `id` | string | âœ… | æ’ä»¶å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå°å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦ï¼‰ |
| `name` | string | âœ… | æ’ä»¶æ˜¾ç¤ºåç§° |
| `version` | string | âœ… | ç‰ˆæœ¬å·ï¼ˆéµå¾ª SemVerï¼‰ |
| `author` | string | âœ… | ä½œè€…åç§° |
| `description` | string | âœ… | ç®€çŸ­æè¿°ï¼ˆä¸è¶…è¿‡ 200 å­—ï¼‰ |
| `repository` | string | â­• | æºä»£ç ä»“åº“ URL |
| `minLauncherVersion` | string | â­• | æœ€ä½å¯åŠ¨å™¨ç‰ˆæœ¬è¦æ±‚ï¼ˆé»˜è®¤ 1.0.0ï¼‰ |
| `dependencies` | array | â­• | ä¾èµ–çš„å…¶ä»–æ’ä»¶IDåˆ—è¡¨ |
| `tags` | array | â­• | æ ‡ç­¾åˆ—è¡¨ï¼Œæ”¯æŒå¹³å°æ ‡ç­¾ï¼š`Windows`ã€`Linux`ã€`macOS` |
| `category` | string | â­• | åˆ†ç±»ID |
| `homepage` | string | â­• | æ’ä»¶ä¸»é¡µ URL |
| `license` | string | â­• | å¼€æºåè®® |
| `icon` | string | â­• | å›¾æ ‡æ–‡ä»¶åï¼ˆé»˜è®¤ icon.pngï¼‰ |

---

## ğŸ”§ æ’ä»¶æ¥å£

### ILauncherPlugin æ¥å£

æ‰€æœ‰æ’ä»¶å¿…é¡»å®ç° `ILauncherPlugin` æ¥å£ï¼š

```csharp
namespace ObsMCLauncher.Core.Plugins
{
    public interface ILauncherPlugin
    {
        string Id { get; }
        string Name { get; }
        string Version { get; }
        string Author { get; }
        string Description { get; }
        
        void OnLoad(IPluginContext context);
        void OnUnload();
        void OnShutdown();
    }
}
```

### IPluginContext æ¥å£

é€šè¿‡æ’ä»¶ä¸Šä¸‹æ–‡è®¿é—®å¯åŠ¨å™¨åŠŸèƒ½ï¼š

```csharp
namespace ObsMCLauncher.Core.Plugins
{
    public interface IPluginContext
    {
        string LauncherVersion { get; }
        string PluginDataDirectory { get; }
        
        void RegisterTab(string title, string tabId, string? icon = null, object? payload = null);
        void SubscribeEvent(string eventName, Action<object?> handler);
        void PublishEvent(string eventName, object? eventData);
        
        void RegisterHomeCard(
            string cardId,
            string title,
            string description,
            string? icon = null,
            string? commandId = null,
            object? payload = null);
        
        void UnregisterHomeCard(string cardId);
    }
}
```

---

## ğŸ”§ API å‚è€ƒ

### 1. äº‹ä»¶ç³»ç»Ÿ

è®¢é˜…å’Œå‘å¸ƒäº‹ä»¶ï¼š

```csharp
public void OnLoad(IPluginContext context)
{
    context.SubscribeEvent("GameLaunched", OnGameLaunched);
    context.SubscribeEvent("GameClosed", OnGameClosed);
}

private void OnGameLaunched(object? eventData)
{
    System.Diagnostics.Debug.WriteLine("æ¸¸æˆå·²å¯åŠ¨");
}

private void OnGameClosed(object? eventData)
{
    System.Diagnostics.Debug.WriteLine("æ¸¸æˆå·²å…³é—­");
}
```

**å¯ç”¨äº‹ä»¶**ï¼š
- `GameLaunched` - æ¸¸æˆå¯åŠ¨
- `GameClosed` - æ¸¸æˆå…³é—­
- `VersionDownloaded` - ç‰ˆæœ¬ä¸‹è½½å®Œæˆ
- æ’ä»¶ä¹Ÿå¯ä»¥å‘å¸ƒè‡ªå®šä¹‰äº‹ä»¶

### 2. æ³¨å†ŒUIæ ‡ç­¾é¡µ

æ’ä»¶å¯ä»¥åœ¨"æ›´å¤š"é¡µé¢æ·»åŠ è‡ªå·±çš„æ ‡ç­¾é¡µï¼š

```csharp
public void OnLoad(IPluginContext context)
{
    context.RegisterTab(
        "æˆ‘çš„æ’ä»¶",           // æ ‡ç­¾é¡µæ ‡é¢˜
        "my-plugin-tab",     // æ ‡ç­¾é¡µIDï¼ˆå”¯ä¸€ï¼‰
        "Star",              // å›¾æ ‡åç§°ï¼ˆå¯é€‰ï¼‰
        null                 // è‡ªå®šä¹‰æ•°æ®ï¼ˆå¯é€‰ï¼‰
    );
}
```

**è¯´æ˜**ï¼š
- æ ‡ç­¾é¡µä¼šæ˜¾ç¤ºåœ¨"æ›´å¤š"é¡µé¢çš„é¡¶éƒ¨å¯¼èˆªæ 
- `tabId` å¿…é¡»å”¯ä¸€ï¼Œå»ºè®®ä½¿ç”¨æ’ä»¶IDä½œä¸ºå‰ç¼€
- å›¾æ ‡ä½¿ç”¨ Material Design å›¾æ ‡åç§°

### 3. æ³¨å†Œä¸»é¡µå¡ç‰‡

æ’ä»¶å¯ä»¥åœ¨ä¸»é¡µæ·»åŠ è‡ªå®šä¹‰å¡ç‰‡ï¼š

```csharp
public void OnLoad(IPluginContext context)
{
    context.RegisterHomeCard(
        "my-card",                    // å¡ç‰‡IDï¼ˆåœ¨æ’ä»¶å†…å”¯ä¸€ï¼‰
        "æˆ‘çš„æ’ä»¶å¡ç‰‡",                // å¡ç‰‡æ ‡é¢˜
        "è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹å¡ç‰‡",            // å¡ç‰‡æè¿°
        "ğŸŒŸ",                          // å›¾æ ‡ï¼ˆå¯é€‰ï¼Œemojiæˆ–æ–‡æœ¬ï¼‰
        "url:https://example.com",     // å‘½ä»¤IDï¼ˆå¯é€‰ï¼‰
        null                           // è‡ªå®šä¹‰æ•°æ®ï¼ˆå¯é€‰ï¼‰
    );
}

public void OnUnload()
{
    _context?.UnregisterHomeCard("my-card");
}
```

**å‘½ä»¤IDæ”¯æŒçš„æ ¼å¼**ï¼š
- `url:https://example.com` - æ‰“å¼€å¤–éƒ¨ç½‘é¡µé“¾æ¥
- `navigate:multiplayer` - è·³è½¬åˆ°å¯åŠ¨å™¨å†…éƒ¨é¡µé¢ï¼ˆæ”¯æŒçš„é¡µé¢ï¼š`multiplayer`ã€`resources`ã€`accounts`ã€`versions`ã€`settings`ã€`more`ï¼‰
- ç•™ç©ºæˆ–null - å¡ç‰‡ä¸å¯ç‚¹å‡»ï¼ˆä»…å±•ç¤ºä¿¡æ¯ï¼‰

**ç¤ºä¾‹**ï¼š
```csharp
// æ‰“å¼€å¤–éƒ¨é“¾æ¥
context.RegisterHomeCard(
    "wiki-card",
    "æŸ¥çœ‹Wiki",
    "è®¿é—®Minecraft Wiki",
    "ğŸ“–",
    "url:https://zh.minecraft.wiki"
);

// è·³è½¬åˆ°å†…éƒ¨é¡µé¢
context.RegisterHomeCard(
    "mods-card",
    "ä¸‹è½½Mod",
    "æµè§ˆå’Œä¸‹è½½Modèµ„æº",
    "ğŸ“¦",
    "navigate:resources"
);
```

### 4. æ’ä»¶æ•°æ®ç›®å½•

```csharp
public void OnLoad(IPluginContext context)
{
    string dataDir = context.PluginDataDirectory;
    
    var configPath = Path.Combine(dataDir, "config.json");
    File.WriteAllText(configPath, "{}");
    
    var dataFolder = Path.Combine(dataDir, "data");
    Directory.CreateDirectory(dataFolder);
}
```

### 5. å¯åŠ¨å™¨ç‰ˆæœ¬ä¿¡æ¯

```csharp
public void OnLoad(IPluginContext context)
{
    string version = context.LauncherVersion;
    
    if (new Version(version) < new Version("1.1.0"))
    {
        System.Diagnostics.Debug.WriteLine("å¯åŠ¨å™¨ç‰ˆæœ¬è¿‡ä½");
    }
}
```

### 6. é€šçŸ¥ç³»ç»Ÿ

æ’ä»¶å¯ä»¥æ˜¾ç¤ºã€æ›´æ–°å’Œå…³é—­é€šçŸ¥ï¼š

```csharp
public void OnLoad(IPluginContext context)
{
    // æ˜¾ç¤ºç®€å•é€šçŸ¥ï¼ˆé»˜è®¤3ç§’åè‡ªåŠ¨å…³é—­ï¼‰
    context.ShowNotification("æç¤º", "æ“ä½œæˆåŠŸ", "success");
    
    // æ˜¾ç¤ºé”™è¯¯é€šçŸ¥ï¼ˆ5ç§’åå…³é—­ï¼‰
    context.ShowNotification("é”™è¯¯", "æ“ä½œå¤±è´¥", "error", 5);
    
    // æ˜¾ç¤ºè¿›åº¦é€šçŸ¥ï¼ˆæ— é™æŒç»­æ—¶é—´ï¼‰
    var notifId = context.ShowNotification("ä¸‹è½½ä¸­", "æ­£åœ¨ä¸‹è½½...", "progress", null);
    
    // æ›´æ–°é€šçŸ¥
    context.UpdateNotification(notifId, "ä¸‹è½½ä¸­ 50%", 50);
    
    // å…³é—­é€šçŸ¥
    context.CloseNotification(notifId);
}
```

**é€šçŸ¥ç±»å‹**ï¼š
- `info` - ä¿¡æ¯é€šçŸ¥ï¼ˆè“è‰²ï¼‰
- `success` - æˆåŠŸé€šçŸ¥ï¼ˆç»¿è‰²ï¼‰
- `warning` - è­¦å‘Šé€šçŸ¥ï¼ˆé»„è‰²ï¼‰
- `error` - é”™è¯¯é€šçŸ¥ï¼ˆçº¢è‰²ï¼‰
- `progress` - è¿›åº¦é€šçŸ¥ï¼ˆå¸¦è¿›åº¦æ¡ï¼‰

**æŒç»­æ—¶é—´**ï¼š
- ä¸ä¼ æˆ–ä¼  `null`ï¼šé»˜è®¤3ç§’è‡ªåŠ¨å…³é—­
- ä¼ å…·ä½“ç§’æ•°ï¼šæŒ‡å®šç§’æ•°åå…³é—­
- ä¼  `0` æˆ–è´Ÿæ•°ï¼šæ— é™æŒç»­æ—¶é—´ï¼Œéœ€æ‰‹åŠ¨å…³é—­

---

## ğŸ’» å¼€å‘æµç¨‹

### 1. åˆ›å»ºé¡¹ç›®

```bash
dotnet new classlib -n YourPlugin -f net8.0

cd YourPlugin

dotnet add reference path/to/ObsMCLauncher.Core.dll
```

### 2. é¡¹ç›®æ–‡ä»¶é…ç½®

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="path\to\ObsMCLauncher.Core.csproj" />
  </ItemGroup>
</Project>
```

### 3. å®ç°æ’ä»¶æ¥å£

åˆ›å»º `Plugin.cs`ï¼š

```csharp
using ObsMCLauncher.Core.Plugins;
using System;
using System.IO;

namespace YourPlugin
{
    public class Plugin : ILauncherPlugin
    {
        public string Id => "your-plugin-id";
        public string Name => "Your Plugin Name";
        public string Version => "1.0.0";
        public string Author => "Your Name";
        public string Description => "A brief description of your plugin.";
        
        private IPluginContext? _context;
        
        public void OnLoad(IPluginContext context)
        {
            _context = context;
            
            System.Diagnostics.Debug.WriteLine($"[{Name}] æ’ä»¶å·²åŠ è½½");
            
            context.SubscribeEvent("GameLaunched", OnGameLaunched);
            
            context.RegisterHomeCard(
                "example-card",
                "ç¤ºä¾‹å¡ç‰‡",
                "è¿™æ˜¯ä¸€ä¸ªæ’ä»¶å¡ç‰‡ç¤ºä¾‹",
                "Star"
            );
        }
        
        public void OnUnload()
        {
            _context?.UnregisterHomeCard("example-card");
            System.Diagnostics.Debug.WriteLine($"[{Name}] æ’ä»¶å·²å¸è½½");
        }
        
        public void OnShutdown()
        {
            var configPath = Path.Combine(_context!.PluginDataDirectory, "config.json");
            File.WriteAllText(configPath, "{}");
        }
        
        private void OnGameLaunched(object? eventData)
        {
            System.Diagnostics.Debug.WriteLine($"[{Name}] æ¸¸æˆå·²å¯åŠ¨");
        }
    }
}
```

### 4. åˆ›å»º plugin.json

```json
{
  "id": "your-plugin-id",
  "name": "Your Plugin Name",
  "version": "1.0.0",
  "author": "Your Name",
  "description": "A brief description of your plugin.",
  "repository": "https://github.com/yourusername/your-plugin",
  "minLauncherVersion": "1.0.0",
  "dependencies": [],
  "tags": ["Windows", "å·¥å…·"],
  "category": "utility"
}
```

### 5. ç¼–è¯‘æ’ä»¶

```bash
dotnet build -c Release
```

---

## ğŸ§ª æµ‹è¯•æ’ä»¶

### æœ¬åœ°æµ‹è¯•

1. **æ‰¾åˆ°å¯åŠ¨å™¨è¿è¡Œç›®å½•**
   - å¼€å‘ç¯å¢ƒï¼š`H:\projects\ObsMCLauncher\bin\Debug\net8.0\`

2. **åˆ›å»ºæ’ä»¶æ–‡ä»¶å¤¹**
   ```
   å¯åŠ¨å™¨ç›®å½•\OMCL\plugins\your-plugin-id\
   ```

3. **å¤åˆ¶æ’ä»¶æ–‡ä»¶**
   - `YourPlugin.dll`
   - `plugin.json`
   - `icon.png`ï¼ˆå¯é€‰ï¼‰
   - `README.md`ï¼ˆå¿…éœ€ï¼‰

4. **é‡å¯å¯åŠ¨å™¨**

### è°ƒè¯•

ä½¿ç”¨ Visual Studio é™„åŠ åˆ° `ObsMCLauncher.Desktop` è¿›ç¨‹è¿›è¡Œè°ƒè¯•ã€‚

---

## ğŸš€ å‘å¸ƒæµç¨‹

### 1. å‡†å¤‡å‘å¸ƒåŒ…

```bash
dotnet build -c Release

cd bin/Release/net8.0/

Compress-Archive -Path YourPlugin.dll,plugin.json,README.md -DestinationPath YourPlugin.zip
```

### 2. GitHub Release

1. åˆ›å»ºæ–° Release
2. Tag: `v1.0.0`
3. ä¸Šä¼  ZIP æ–‡ä»¶

### 3. æäº¤åˆ°æ’ä»¶å¸‚åœº

åœ¨ [ObsMCLauncher-PluginMarket](https://github.com/mcobs/ObsMCLauncher-PluginMarket) æäº¤ PR æˆ– Issueã€‚

---

## ğŸ“ ç¤ºä¾‹æ’ä»¶

### ç®€å•é€šçŸ¥æ’ä»¶

```csharp
using ObsMCLauncher.Core.Plugins;

namespace HelloPlugin
{
    public class Plugin : ILauncherPlugin
    {
        public string Id => "hello-plugin";
        public string Name => "Hello Plugin";
        public string Version => "1.0.0";
        public string Author => "Your Name";
        public string Description => "A simple example plugin.";
        
        public void OnLoad(IPluginContext context)
        {
            System.Diagnostics.Debug.WriteLine("[HelloPlugin] Hello from plugin!");
        }
        
        public void OnUnload() { }
        public void OnShutdown() { }
    }
}
```

### äº‹ä»¶è®¢é˜…æ’ä»¶

```csharp
using ObsMCLauncher.Core.Plugins;
using System.Diagnostics;

namespace EventPlugin
{
    public class Plugin : ILauncherPlugin
    {
        public string Id => "event-plugin";
        public string Name => "Event Plugin";
        public string Version => "1.0.0";
        public string Author => "Your Name";
        public string Description => "Demonstrates event subscription.";
        
        private IPluginContext? _context;
        
        public void OnLoad(IPluginContext context)
        {
            _context = context;
            
            context.SubscribeEvent("GameLaunched", OnGameLaunched);
            context.SubscribeEvent("GameClosed", OnGameClosed);
            
            Debug.WriteLine("[EventPlugin] Subscribed to events");
        }
        
        public void OnUnload()
        {
            Debug.WriteLine("[EventPlugin] Unloaded");
        }
        
        public void OnShutdown()
        {
            Debug.WriteLine("[EventPlugin] Shutdown");
        }
        
        private void OnGameLaunched(object? eventData)
        {
            Debug.WriteLine($"[EventPlugin] Game launched: {eventData}");
        }
        
        private void OnGameClosed(object? eventData)
        {
            Debug.WriteLine($"[EventPlugin] Game closed: {eventData}");
        }
    }
}
```

---

## âš ï¸ UI æ¡†æ¶è¯´æ˜

ObsMCLauncher ä½¿ç”¨ **Avalonia UI** æ¡†æ¶å¼€å‘ï¼Œæ”¯æŒè·¨å¹³å°è¿è¡Œï¼ˆWindows/macOS/Linuxï¼‰ã€‚

æ’ä»¶å¼€å‘æ—¶è¯·æ³¨æ„ï¼š
- ä½¿ç”¨ `Path.Combine()` å¤„ç†æ–‡ä»¶è·¯å¾„ï¼Œç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§
- UI æ“ä½œéœ€åœ¨ UI çº¿ç¨‹æ‰§è¡Œï¼Œä½¿ç”¨ `Avalonia.Threading.Dispatcher.UIThread.Post()`

---

## â“ å¸¸è§é—®é¢˜

### Q: æ’ä»¶å¯ä»¥è®¿é—®å“ªäº›å¯åŠ¨å™¨åŠŸèƒ½ï¼Ÿ

A: æ’ä»¶é€šè¿‡ `IPluginContext` å¯ä»¥è®¿é—®ï¼š
- äº‹ä»¶è®¢é˜…å’Œå‘å¸ƒ
- UI æ‰©å±•ï¼ˆæ ‡ç­¾é¡µã€ä¸»é¡µå¡ç‰‡ï¼‰
- æ’ä»¶æ•°æ®ç›®å½•
- å¯åŠ¨å™¨ç‰ˆæœ¬ä¿¡æ¯

### Q: æ’ä»¶å¦‚ä½•ä¿å­˜æ•°æ®ï¼Ÿ

A: ä½¿ç”¨ `context.PluginDataDirectory` è·å–ä¸“å±æ•°æ®ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹ä¿å­˜é…ç½®å’Œæ•°æ®æ–‡ä»¶ã€‚

### Q: æ’ä»¶å¯ä»¥æ·»åŠ æ–°çš„ UI é¡µé¢å—ï¼Ÿ

A: å¯ä»¥ï¼Œä½¿ç”¨ `context.RegisterTab()` åœ¨"æ›´å¤š"é¡µé¢æ³¨å†Œæ ‡ç­¾é¡µã€‚

### Q: æ’ä»¶å‡ºé”™ä¼šå¯¼è‡´å¯åŠ¨å™¨å´©æºƒå—ï¼Ÿ

A: ä¸ä¼šï¼Œå¯åŠ¨å™¨ä¼šæ•è·æ’ä»¶å¼‚å¸¸å¹¶éš”ç¦»é”™è¯¯ï¼Œåªä¼šç¦ç”¨æœ‰é—®é¢˜çš„æ’ä»¶ã€‚

### Q: å¦‚ä½•è°ƒè¯•æ’ä»¶ï¼Ÿ

A: ä½¿ç”¨ Visual Studio é™„åŠ åˆ° `ObsMCLauncher.Desktop` è¿›ç¨‹è¿›è¡Œè°ƒè¯•ã€‚

---

## å‚è€ƒèµ„æº

- [ObsMCLauncher å®˜æ–¹ä»“åº“](https://github.com/mcobs/ObsMCLauncher)
- [.NET 8.0 æ–‡æ¡£](https://learn.microsoft.com/zh-cn/dotnet/)
- [Avalonia UI æ–‡æ¡£](https://docs.avaloniaui.net/)
- [Material Design Icons](https://pictogrammers.com/library/mdi/)

---

## æ”¯æŒ

- **GitHub Issues**: [æäº¤é—®é¢˜](https://github.com/mcobs/ObsMCLauncher/issues)
- **è®¨è®ºåŒº**: [GitHub Discussions](https://github.com/mcobs/ObsMCLauncher/discussions)
- **é»‘æ›œçŸ³è®ºå›**: [https://mcobs.cn/](https://mcobs.cn/)

---

## è®¸å¯è¯

æœ¬æ–‡æ¡£é‡‡ç”¨ [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/) è®¸å¯åè®®ã€‚

æ’ä»¶å¼€å‘è€…å¯ä»¥é€‰æ‹©ä»»ä½•å¼€æºåè®®å‘å¸ƒæ’ä»¶ï¼Œæ¨èä½¿ç”¨ MIT License æˆ– GPL-3.0ã€‚

**æ³¨æ„**ï¼šObsMCLauncher æœ¬èº«é‡‡ç”¨ GPL-3.0 è®¸å¯è¯ï¼Œå¦‚æœæ‚¨çš„æ’ä»¶ä¸å¯åŠ¨å™¨æ·±åº¦é›†æˆï¼Œå¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨å…¼å®¹çš„è®¸å¯è¯ã€‚

---

**ç¥æ‚¨å¼€å‘æ„‰å¿«ï¼**

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨ GitHub ä¸Šæé—®æˆ–å‚ä¸è®¨è®ºã€‚
